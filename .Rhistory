Ind_W[x,48]<-((relIndw5*relInd_5[3])+(relIndw6*relInd_6[20])+(relIndw7*relInd_7[33])+(relIndw8*relInd_8[19]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 49(2013) use the real data
Ind_W[x,49]<-((relIndw5*relInd_5[4])+(relIndw6*relInd_6[21])+(relIndw7*relInd_7[34])+(relIndw8*relInd_8[20]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 50(2014) use the real data
Ind_W[x,50]<-((relIndw5*relInd_5[5])+(relIndw6*relInd_6[22])+(relIndw7*relInd_7[35])+(relIndw8*relInd_8[21]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 51(2015) use the real data
Ind_W[x,51]<-((relIndw5*relInd_5[6])+(relIndw6*relInd_6[23])+(relIndw7*relInd_7[36])+(relIndw8*relInd_8[22]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 52(2016) use the real data
Ind_W[x,52]<-((relIndw5*relInd_5[7])+(relIndw6*relInd_6[24])+(relIndw7*relInd_7[37])+(relIndw8*relInd_8[23]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 53(2017) use the real data
Ind_W[x,53]<-((relIndw5*relInd_5[8])+(relIndw7*relInd_7[38]))/(relIndw5+relIndw7)
if(lastyr==54){
#Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr==55){
#Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr>=56){
#Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr>=58){
Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
#Here we further prepare to use the average of combined index over 3 years
aveInd_W<-matrix(data=NA,nrow=200,ncol=200)
cury <- dim(dset$TAC)[2]
print(cury)
aveInd_W[x,cury-2]=(Ind_W[x,lastyr-2]+Ind_W[x,lastyr-3]+Ind_W[x,lastyr-4])/3
#cat(sprintf("%d\t%f\n%d\t%f\n",x,Ind_W[x,lastyr-1],x,Ind_W[x,lastyr]),file="jwvalue.txt",append=TRUE)
##data needed just to check the model is workind well - can delete it later######
#for Year 47 (=2011) use the real data
Ind_W[x,47]<-((relIndw5*relInd_5[2])+(relIndw6*relInd_6[19])+(relIndw7*relInd_7[32])+(relIndw8*relInd_8[18]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 46 (=2010) use the real data
Ind_W[x,46]<-((relIndw5*relInd_5[1])+(relIndw6*relInd_6[18])+(relIndw7*relInd_7[31])+(relIndw8*relInd_8[17]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 45 (=2009) use the real data
Ind_W[x,45]<-((relIndw6*relInd_6[17])+(relIndw7*relInd_7[30])+(relIndw8*relInd_8[16]))/(relIndw6+relIndw7+relIndw8)
#for Year 44 (=2008) use the real data
Ind_W[x,44]<-((relIndw6*relInd_6[16])+(relIndw7*relInd_7[29])+(relIndw8*relInd_8[15]))/(relIndw6+relIndw7+relIndw8)
#for Year 43 (=2007) use the real data
Ind_W[x,43]<-((relIndw6*relInd_6[15])+(relIndw7*relInd_7[28])+(relIndw8*relInd_8[14]))/(relIndw6+relIndw7+relIndw8)
#for Year 42 (=2006) use the real data
Ind_W[x,42]<-((relIndw6*relInd_6[14])+(relIndw7*relInd_7[27])+(relIndw8*relInd_8[13]))/(relIndw6+relIndw7+relIndw8)
#aveInd_W for year 52
aveInd_W[x,52]=(Ind_W[x,50]+Ind_W[x,49]+Ind_W[x,48])/3
#aveInd_W for year 50
aveInd_W[x,50]=(Ind_W[x,48]+Ind_W[x,47]+Ind_W[x,46])/3
#aveInd_W for year 48
aveInd_W[x,48]=(Ind_W[x,46]+Ind_W[x,45]+Ind_W[x,44])/3
#aveInd_W for year 46
aveInd_W[x,46]=(Ind_W[x,44]+Ind_W[x,43]+Ind_W[x,42])/3
cat(sprintf("%d\t%f\n",x,aveInd_W[x,cury-2]) , file = "avejwvalue.txt", append = TRUE)
#cat(sprintf("%d\t%d\t%f\n%d\t%d\t%f\n",x,lastyr-1,Ind_W[x,lastyr-1],x,lastyr,Ind_W[x,lastyr]),file="jwvalue2.txt",append=TRUE)
#cat(sprintf("%d\t%f\t%f\t%f\t%f\n",x,aveInd_W[x,52],aveInd_W[x,50],aveInd_W[x,48],aveInd_W[x,46]) , file = "avejvalueW52504846.txt", append = TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[32:39],relInd_5),file="relInd_5.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[40:63],relInd_6),file="relInd_6.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[64:101],relInd_7),file="relInd_7.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[102:124],relInd_8),file="relInd_8.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd5[x,lastyr]),file="relInd5.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd6[x,lastyr]),file="relInd6.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd7[x,lastyr]),file="relInd7.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd8[x,lastyr]),file="relInd8.txt",append=TRUE)
#Here is the equation to set the TAC
TAC_W=(dset$curTAC[x]/Ind_W[x,53])*beta*aveInd_W[x,cury-2]
#but just for now, set it to constant current catch
#TAC_W=dset$curTAC[x]
#TAC_W=0
#ADD constraints of TAC change is plus minus 20%
if(TAC_W>dset$MPrec[x]+(dset$MPrec[x]*0.2)){
TAC_W=dset$MPrec[x]+(dset$MPrec[x]*0.2)
}
else if (TAC_W<dset$MPrec[x]-(dset$MPrec[x]*0.2)){
TAC_W=dset$MPrec[x]-(dset$MPrec[x]*0.2)
}
else{
TAC_W
}
TAC_W
}
class(FXP_W)<-"MP"#############################3
#############Below are added on 2018.Sep 9###
################################################
#myMP<-list(c("CurC100","CurC100"))
#myMP<-list(c("CurC100","CurC100"),c("FXP_E", "FXP_W"))
#myMP<-list(c("CurC50","CurC50"),c("CurC100","CurC100"),c("CurC150","CurC150"))
#myMP<-list(c("CMP1.0E", "CMP0.1W"),c("CurC100","CurC100"))
myMP<-list(c("FXP_E", "FXP_W"))
test<-new("MSE",OM=OM_1d, Obs=Good_Obs, MPs=myMP, interval=2)
#14:00-14:20
#10:30-
library(ABTMSE)
loadABT()
#avail("OM") #check what OMs are available
#Design$Design_Ref #chech scenarios of OM
#sfInit(parallel=TRUE, cpus=detectCores())
#avail("IE")
FXP_E<-function(x,dset,alp=1.3){
MPind<-Good_Obs@MPind
#Get the average index value for the selected observed index
aveInd_1=mean(MPind$Index[2:8]) #average for index1 from year 47-53
aveInd_2=mean(MPind$Index[9:16])#average for index2 from year45 46 47 48 50 51 52 53
aveInd_3=mean(MPind$Index[22:25])#average for index3 from year48 49 50 51
aveInd_4=mean(MPind$Index[26:31])#average for index4 from year 46 47 49 51 53 54
#For all the index get the relative index value to the average->This will make all values close to 1
relInd_1=MPind$Index[1:8]/aveInd_1
relInd_2=MPind$Index[9:16]/aveInd_2
relInd_3=MPind$Index[17:25]/aveInd_3
relInd_4=MPind$Index[26:31]/aveInd_4
#Now we want to calculate the inverse Variance for each  index
relIndw1<-1/var(relInd_1,na.rm=T)
relIndw2<-1/var(relInd_2,na.rm=T)
relIndw3<-1/var(relInd_3,na.rm=T)
relIndw4<-1/var(relInd_4,na.rm=T)
#Same as above but we want to adopt the equation for FUTURE values as well not only past data
relInd1<-dset$Iobs[,1,]/aveInd_1
relInd2<-dset$Iobs[,2,]/aveInd_2
relInd3<-dset$Iobs[,3,]/aveInd_3
relInd4<-dset$Iobs[,4,]/aveInd_4
#Now we want to calculate the inverse Variance for each relative FUTURE index (as well as the past)
relInd_w1<-vector()
relInd_w2<-vector()
relInd_w3<-vector()
relInd_w4<-vector()
relInd_w1[x]<-1/var(relInd1[x,],na.rm=T)
relInd_w2[x]<-1/var(relInd2[x,],na.rm=T)
relInd_w3[x]<-1/var(relInd3[x,],na.rm=T)
relInd_w4[x]<-1/var(relInd4[x,],na.rm=T)
#Now we want to calculate a combined average index (combine index1-4).
Ind_E<-matrix(data=NA,nrow=200,ncol=200)
lastyr=dim(dset$Iobs)[3]
print(lastyr)
#for Year 48 (=2012) use the real data
Ind_E[x,48]<-((relIndw1*relInd_1[3])+(relIndw2*relInd_2[4])+(relIndw3*relInd_3[6]))/(relIndw1+relIndw2+relIndw3)
#for Year 49 (previous code year 30)(=2013) use the real data
Ind_E[x,49]<-((relIndw1*relInd_1[4])+(relIndw3*relInd_3[7])+(relIndw4*relInd_4[3]))/(relIndw1+relIndw3+relIndw4)
#for Year 50(=2014) use the real data
Ind_E[x,50]<-((relIndw1*relInd_1[5])+(relIndw2*relInd_2[5])+(relIndw3*relInd_3[8]))/(relIndw1+relIndw2+relIndw3)
#for year 51(=2015) use the real data
Ind_E[x,51]<-((relIndw1*relInd_1[6])+(relIndw2*relInd_2[6])+(relIndw3*relInd_3[9])+(relIndw4*relInd_4[4]))/(relIndw1+relIndw2+relIndw3+relIndw4)
#for year 52(=2016) use the real data
Ind_E[x,52]<-((relIndw1*relInd_1[7])+(relIndw2*relInd_2[7]))/(relIndw1+relIndw2)
#for year 53(=2017) use the real data
Ind_E[x,53]<-((relIndw1*relInd_1[8])+(relIndw2*relInd_2[8])+(relIndw4*relInd_4[5]))/(relIndw1+relIndw2+relIndw4)
#for year 54(=2018) use the real data though note that there is only one
Ind_E[x,54]<-(relIndw4*relInd_4[6])/(relIndw4)
if(lastyr==55){
#Ind_E[x,lastyr-2]<-((relInd_w1[x]*relInd1[x,lastyr-2])+(relInd_w2[x]*relInd2[x,lastyr-2])+(relInd_w3[x]*relInd3[x,lastyr-2])+(relInd_w4[x]*relInd4[x,lastyr-2]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
#Ind_E[x,lastyr-1]<-((relInd_w1[x]*relInd1[x,lastyr-1])+(relInd_w2[x]*relInd2[x,lastyr-1])+(relInd_w3[x]*relInd3[x,lastyr-1])+(relInd_w4[x]*relInd4[x,lastyr-1]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr]<-((relInd_w1[x]*relInd1[x,lastyr])+(relInd_w2[x]*relInd2[x,lastyr])+(relInd_w3[x]*relInd3[x,lastyr])+(relInd_w4[x]*relInd4[x,lastyr]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
}
if(lastyr==56){
#Ind_E[x,lastyr-4]<-((relInd_w1[x]*relInd1[x,lastyr-4])+(relInd_w2[x]*relInd2[x,lastyr-4])+(relInd_w3[x]*relInd3[x,lastyr-4])+(relInd_w4[x]*relInd4[x,lastyr-4]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
#Ind_E[x,lastyr-3]<-((relInd_w1[x]*relInd1[x,lastyr-3])+(relInd_w2[x]*relInd2[x,lastyr-3])+(relInd_w3[x]*relInd3[x,lastyr-3])+(relInd_w4[x]*relInd4[x,lastyr-3]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
#Ind_E[x,lastyr-2]<-((relInd_w1[x]*relInd1[x,lastyr-2])+(relInd_w2[x]*relInd2[x,lastyr-2])+(relInd_w3[x]*relInd3[x,lastyr-2])+(relInd_w4[x]*relInd4[x,lastyr-2]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-1]<-((relInd_w1[x]*relInd1[x,lastyr-1])+(relInd_w2[x]*relInd2[x,lastyr-1])+(relInd_w3[x]*relInd3[x,lastyr-1])+(relInd_w4[x]*relInd4[x,lastyr-1]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr]<-((relInd_w1[x]*relInd1[x,lastyr])+(relInd_w2[x]*relInd2[x,lastyr])+(relInd_w3[x]*relInd3[x,lastyr])+(relInd_w4[x]*relInd4[x,lastyr]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
}
if(lastyr>=58){
#Ind_E[x,lastyr-4]<-((relInd_w1[x]*relInd1[x,lastyr-4])+(relInd_w2[x]*relInd2[x,lastyr-4])+(relInd_w3[x]*relInd3[x,lastyr-4])+(relInd_w4[x]*relInd4[x,lastyr-4]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-3]<-((relInd_w1[x]*relInd1[x,lastyr-3])+(relInd_w2[x]*relInd2[x,lastyr-3])+(relInd_w3[x]*relInd3[x,lastyr-3])+(relInd_w4[x]*relInd4[x,lastyr-3]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-2]<-((relInd_w1[x]*relInd1[x,lastyr-2])+(relInd_w2[x]*relInd2[x,lastyr-2])+(relInd_w3[x]*relInd3[x,lastyr-2])+(relInd_w4[x]*relInd4[x,lastyr-2]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-1]<-((relInd_w1[x]*relInd1[x,lastyr-1])+(relInd_w2[x]*relInd2[x,lastyr-1])+(relInd_w3[x]*relInd3[x,lastyr-1])+(relInd_w4[x]*relInd4[x,lastyr-1]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr]<-((relInd_w1[x]*relInd1[x,lastyr])+(relInd_w2[x]*relInd2[x,lastyr])+(relInd_w3[x]*relInd3[x,lastyr])+(relInd_w4[x]*relInd4[x,lastyr]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
}
if(lastyr>=60){
Ind_E[x,lastyr-4]<-((relInd_w1[x]*relInd1[x,lastyr-4])+(relInd_w2[x]*relInd2[x,lastyr-4])+(relInd_w3[x]*relInd3[x,lastyr-4])+(relInd_w4[x]*relInd4[x,lastyr-4]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-3]<-((relInd_w1[x]*relInd1[x,lastyr-3])+(relInd_w2[x]*relInd2[x,lastyr-3])+(relInd_w3[x]*relInd3[x,lastyr-3])+(relInd_w4[x]*relInd4[x,lastyr-3]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-2]<-((relInd_w1[x]*relInd1[x,lastyr-2])+(relInd_w2[x]*relInd2[x,lastyr-2])+(relInd_w3[x]*relInd3[x,lastyr-2])+(relInd_w4[x]*relInd4[x,lastyr-2]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr-1]<-((relInd_w1[x]*relInd1[x,lastyr-1])+(relInd_w2[x]*relInd2[x,lastyr-1])+(relInd_w3[x]*relInd3[x,lastyr-1])+(relInd_w4[x]*relInd4[x,lastyr-1]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
Ind_E[x,lastyr]<-((relInd_w1[x]*relInd1[x,lastyr])+(relInd_w2[x]*relInd2[x,lastyr])+(relInd_w3[x]*relInd3[x,lastyr])+(relInd_w4[x]*relInd4[x,lastyr]))/(relInd_w1[x]+relInd_w2[x]+relInd_w3[x]+relInd_w4[x])
}
#Here we further prepare to use the average of combined index over 3 years
aveInd_E<-matrix(data=NA,nrow=200,ncol=200)
cury <- dim(dset$TAC)[2]
print(cury)
#aveInd_E[x,cury]=(Ind_E[x,lastyr]+Ind_E[x,lastyr-1]+Ind_E[x,lastyr-2])/3
aveInd_E[x,cury-2]=(Ind_E[x,lastyr-2]+Ind_E[x,lastyr-3]+Ind_E[x,lastyr-4])/3
##data needed just to check the model is workind well - can delete it later######
#for Year 47 (=2011) use the real data
Ind_E[x,47]<-((relIndw1*relInd_1[2])+(relIndw2*relInd_2[3])+(relIndw4*relInd_4[2]))/(relIndw1+relIndw2+relIndw4)
#for Year 46 (=2010) use the real data
Ind_E[x,46]<-((relIndw1*relInd_1[1])+(relIndw2*relInd_2[2])+(relIndw4*relInd_4[1]))/(relIndw1+relIndw2+relIndw4)
#for Year 45 (=2009) use the real data only for survey2
Ind_E[x,45]<-(relIndw2*relInd_2[1])/(relIndw2)
#for Year 44 there is no data
#for Year 43 there is no data
#for year 42 there is no data
#aveInd_E for year 52
aveInd_E[x,52]=(Ind_E[x,50]+Ind_E[x,49]+Ind_E[x,48])/3
#aveInd_E for year 50
aveInd_E[x,50]=(Ind_E[x,48]+Ind_E[x,47]+Ind_E[x,46])/3
#aveInd_E for year 48
aveInd_E[x,48]=(Ind_E[x,46]+Ind_E[x,45])/2
#aveInd_E for year 46 = (Ind_E[x,43]+Ind_E[x,42])/2 ---there is no Index for year 43 and 42 so this can not be produced
#cat(sprintf("%d\t%f\n%d\t%f\n",x,Ind_E[x,lastyr-1],x,Ind_E[x,lastyr]),file="jvalueE.txt",append=TRUE)
#cat(sprintf("%d\t%f\n",x,aveInd_E[x,cury-2]) , file = "avejvalueE.txt", append = TRUE)
#cat(sprintf("%d\t%f\t%f\t%f\n",x,aveInd_E[x,52],aveInd_E[x,50],aveInd_E[x,48]) , file = "avejvalueE525048.txt", append = TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[1:8],relInd_1),file="relInd_1.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[9:16],relInd_2),file="relInd_2.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[17:25],relInd_3),file="relInd_3.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[26:31],relInd_4),file="relInd_4.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd1[x,lastyr]),file="relInd1.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd2[x,lastyr]),file="relInd2.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd3[x,lastyr]),file="relInd3.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd4[x,lastyr]),file="relInd4.txt",append=TRUE)
#Here is the equation to set the TAC
TAC_E=(dset$curTAC[x]/Ind_E[x,53])*alp*aveInd_E[x,cury-2]
#But just for now, set it to constant current catch
#TAC_E=dset$curTAC[x]
#TAC_E=0
#ADD constraints of TAC change is plus minus 20%
if(TAC_E>dset$MPrec[x]+(dset$MPrec[x]*0.2)){
TAC_E=dset$MPrec[x]+(dset$MPrec[x]*0.2)
}
else if (TAC_E<dset$MPrec[x]-(dset$MPrec[x]*0.2)){
TAC_E=dset$MPrec[x]-(dset$MPrec[x]*0.2)
}
else{
TAC_E
}
TAC_E
}
class(FXP_E)<-"MP"#############################################3
FXP_W<-function(x,dset,beta=0.75){
MPind<-Good_Obs@MPind
#Get the average index value for the selected observed index
aveInd_5=mean(MPind$Index[33:39]) #average for indexvJPN_LL_west2 from year 47-53
aveInd_6=mean(MPind$Index[54:63])#average for US_RR from year 43-52
aveInd_7=mean(MPind$Index[64:101])# for now taking average for all year for GOM_LAR
aveInd_8=mean(MPind$Index[114:124])#average for CAN_ACO_SUR from year 42-52
#For all the index get the relative index value to the average->This will make all values close to 1
relInd_5=MPind$Index[32:39]/aveInd_5
relInd_6=MPind$Index[40:63]/aveInd_6
relInd_7=MPind$Index[64:101]/aveInd_7
relInd_8=MPind$Index[102:124]/aveInd_8
#Now we want to calculate the inverse Variance for earch  index
relIndw5<-1/var(relInd_5,na.rm=T)
relIndw6<-1/var(relInd_6,na.rm=T)
relIndw7<-1/var(relInd_7,na.rm=T)
relIndw8<-1/var(relInd_8,na.rm=T)
#Same as above but we want to adopt the equation for FUTURE values as well not only past data
relInd5<-dset$Iobs[,5,]/aveInd_5
relInd6<-dset$Iobs[,6,]/aveInd_6
relInd7<-dset$Iobs[,7,]/aveInd_7
relInd8<-dset$Iobs[,8,]/aveInd_8
#Now we want to calculate the inverse Variance for earch relative FUTURE index (as well as the past)
relInd_w5<-vector()
relInd_w6<-vector()
relInd_w7<-vector()
relInd_w8<-vector()
relInd_w5[x]<-1/var(relInd5[x,],na.rm=T)
relInd_w6[x]<-1/var(relInd6[x,],na.rm=T)
relInd_w7[x]<-1/var(relInd7[x,],na.rm=T)
relInd_w8[x]<-1/var(relInd8[x,],na.rm=T)
#Now we want to calculate a combined average index (combined index5-8).
Ind_W<-matrix(data=NA,nrow=200,ncol=200)
lastyr=dim(dset$Iobs)[3]
print(lastyr)
#for Year 48(=2012) use the real data
Ind_W[x,48]<-((relIndw5*relInd_5[3])+(relIndw6*relInd_6[20])+(relIndw7*relInd_7[33])+(relIndw8*relInd_8[19]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 49(2013) use the real data
Ind_W[x,49]<-((relIndw5*relInd_5[4])+(relIndw6*relInd_6[21])+(relIndw7*relInd_7[34])+(relIndw8*relInd_8[20]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 50(2014) use the real data
Ind_W[x,50]<-((relIndw5*relInd_5[5])+(relIndw6*relInd_6[22])+(relIndw7*relInd_7[35])+(relIndw8*relInd_8[21]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 51(2015) use the real data
Ind_W[x,51]<-((relIndw5*relInd_5[6])+(relIndw6*relInd_6[23])+(relIndw7*relInd_7[36])+(relIndw8*relInd_8[22]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 52(2016) use the real data
Ind_W[x,52]<-((relIndw5*relInd_5[7])+(relIndw6*relInd_6[24])+(relIndw7*relInd_7[37])+(relIndw8*relInd_8[23]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for year 53(2017) use the real data
Ind_W[x,53]<-((relIndw5*relInd_5[8])+(relIndw7*relInd_7[38]))/(relIndw5+relIndw7)
if(lastyr==54){
#Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr==55){
#Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr>=56){
#Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
#Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
if(lastyr>=58){
Ind_W[x,lastyr-4]<-((relInd_w5[x]*relInd5[x,lastyr-4])+(relInd_w6[x]*relInd6[x,lastyr-4])+(relInd_w7[x]*relInd7[x,lastyr-4])+(relInd_w8[x]*relInd8[x,lastyr-4]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-3]<-((relInd_w5[x]*relInd5[x,lastyr-3])+(relInd_w6[x]*relInd6[x,lastyr-3])+(relInd_w7[x]*relInd7[x,lastyr-3])+(relInd_w8[x]*relInd8[x,lastyr-3]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-2]<-((relInd_w5[x]*relInd5[x,lastyr-2])+(relInd_w6[x]*relInd6[x,lastyr-2])+(relInd_w7[x]*relInd7[x,lastyr-2])+(relInd_w8[x]*relInd8[x,lastyr-2]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr-1]<-((relInd_w5[x]*relInd5[x,lastyr-1])+(relInd_w6[x]*relInd6[x,lastyr-1])+(relInd_w7[x]*relInd7[x,lastyr-1])+(relInd_w8[x]*relInd8[x,lastyr-1]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
Ind_W[x,lastyr]<-((relInd_w5[x]*relInd5[x,lastyr])+(relInd_w6[x]*relInd6[x,lastyr])+(relInd_w7[x]*relInd7[x,lastyr])+(relInd_w8[x]*relInd8[x,lastyr]))/(relInd_w5[x]+relInd_w6[x]+relInd_w7[x]+relInd_w8[x])
}
#Here we further prepare to use the average of combined index over 3 years
aveInd_W<-matrix(data=NA,nrow=200,ncol=200)
cury <- dim(dset$TAC)[2]
print(cury)
aveInd_W[x,cury-2]=(Ind_W[x,lastyr-2]+Ind_W[x,lastyr-3]+Ind_W[x,lastyr-4])/3
#cat(sprintf("%d\t%f\n%d\t%f\n",x,Ind_W[x,lastyr-1],x,Ind_W[x,lastyr]),file="jwvalue.txt",append=TRUE)
##data needed just to check the model is workind well - can delete it later######
#for Year 47 (=2011) use the real data
Ind_W[x,47]<-((relIndw5*relInd_5[2])+(relIndw6*relInd_6[19])+(relIndw7*relInd_7[32])+(relIndw8*relInd_8[18]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 46 (=2010) use the real data
Ind_W[x,46]<-((relIndw5*relInd_5[1])+(relIndw6*relInd_6[18])+(relIndw7*relInd_7[31])+(relIndw8*relInd_8[17]))/(relIndw5+relIndw6+relIndw7+relIndw8)
#for Year 45 (=2009) use the real data
Ind_W[x,45]<-((relIndw6*relInd_6[17])+(relIndw7*relInd_7[30])+(relIndw8*relInd_8[16]))/(relIndw6+relIndw7+relIndw8)
#for Year 44 (=2008) use the real data
Ind_W[x,44]<-((relIndw6*relInd_6[16])+(relIndw7*relInd_7[29])+(relIndw8*relInd_8[15]))/(relIndw6+relIndw7+relIndw8)
#for Year 43 (=2007) use the real data
Ind_W[x,43]<-((relIndw6*relInd_6[15])+(relIndw7*relInd_7[28])+(relIndw8*relInd_8[14]))/(relIndw6+relIndw7+relIndw8)
#for Year 42 (=2006) use the real data
Ind_W[x,42]<-((relIndw6*relInd_6[14])+(relIndw7*relInd_7[27])+(relIndw8*relInd_8[13]))/(relIndw6+relIndw7+relIndw8)
#aveInd_W for year 52
aveInd_W[x,52]=(Ind_W[x,50]+Ind_W[x,49]+Ind_W[x,48])/3
#aveInd_W for year 50
aveInd_W[x,50]=(Ind_W[x,48]+Ind_W[x,47]+Ind_W[x,46])/3
#aveInd_W for year 48
aveInd_W[x,48]=(Ind_W[x,46]+Ind_W[x,45]+Ind_W[x,44])/3
#aveInd_W for year 46
aveInd_W[x,46]=(Ind_W[x,44]+Ind_W[x,43]+Ind_W[x,42])/3
cat(sprintf("%d\t%f\n",x,aveInd_W[x,cury-2]) , file = "avejwvalue.txt", append = TRUE)
#cat(sprintf("%d\t%d\t%f\n%d\t%d\t%f\n",x,lastyr-1,Ind_W[x,lastyr-1],x,lastyr,Ind_W[x,lastyr]),file="jwvalue2.txt",append=TRUE)
#cat(sprintf("%d\t%f\t%f\t%f\t%f\n",x,aveInd_W[x,52],aveInd_W[x,50],aveInd_W[x,48],aveInd_W[x,46]) , file = "avejvalueW52504846.txt", append = TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[32:39],relInd_5),file="relInd_5.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[40:63],relInd_6),file="relInd_6.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[64:101],relInd_7),file="relInd_7.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,MPind$Year[102:124],relInd_8),file="relInd_8.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd5[x,lastyr]),file="relInd5.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd6[x,lastyr]),file="relInd6.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd7[x,lastyr]),file="relInd7.txt",append=TRUE)
#cat(sprintf("%d\t%d\t%f\n",x,lastyr,relInd8[x,lastyr]),file="relInd8.txt",append=TRUE)
#Here is the equation to set the TAC
TAC_W=(dset$curTAC[x]/Ind_W[x,53])*beta*aveInd_W[x,cury-2]
#but just for now, set it to constant current catch
#TAC_W=dset$curTAC[x]
#TAC_W=0
#ADD constraints of TAC change is plus minus 20%
if(TAC_W>dset$MPrec[x]+(dset$MPrec[x]*0.2)){
TAC_W=dset$MPrec[x]+(dset$MPrec[x]*0.2)
}
else if (TAC_W<dset$MPrec[x]-(dset$MPrec[x]*0.2)){
TAC_W=dset$MPrec[x]-(dset$MPrec[x]*0.2)
}
else{
TAC_W
}
TAC_W
}
class(FXP_W)<-"MP"#############################3
#############Below are added on 2018.Sep 9###
################################################
#myMP<-list(c("CurC100","CurC100"))
#myMP<-list(c("CurC100","CurC100"),c("FXP_E", "FXP_W"))
#myMP<-list(c("CurC50","CurC50"),c("CurC100","CurC100"),c("CurC150","CurC150"))
#myMP<-list(c("CMP1.0E", "CMP0.1W"),c("CurC100","CurC100"))
myMP<-list(c("FXP_E", "FXP_W"))
test<-new("MSE",OM=OM_1d, Obs=Good_Obs, MPs=myMP, interval=2)
test<-new("MSE",OM=OM_1, Obs=Good_Obs, MPs=myMP, interval=2)
plot(test)
packageVersion('ABTMSE')
shiny::runApp('inst/shiny_apps/MERA')
runApp('inst/shiny_apps/MERA')
shiny::runApp('inst/shiny_apps/MERA')
shiny::runApp('inst/shiny_apps/MERA')
shiny::runApp('inst/shiny_apps/MERA')
library(MERA)
library(MERA)
shiny('MERA')
Shiny('MERA')
library(MERA)
library(MERA)
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
out<-readRDS("C:/temp/fittedOM")
Fit<-list()
Fit[[1]]<-out
cc<-1
out@OM
names(out)
out[[1]]
out
shiny::runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
Fit<-list()
out<-readRDS("C:/temp/fittedOM")
out
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
Fit<-list()
out<-readRDS("C:/temp/fittedOM")
Fit[[1]]<-out
names(out)
names(out[[1]])
plot(out)
out<-readRDS("C:/temp/fittedOM")
out
plot
plot(out)
OM<-out@OM
plot(out)
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
out<-readRDS("C:/temp/fittedOM")
OM<-out@OM
plot(out)
rmd <- plot(out, open_file = FALSE)
rmd
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
Fit<-list()
out<-readRDS("C:/temp/fittedOM")
Fit[[1]]<-out
OM<-out@OM
plot(out)
ccno<-1#match(input$SDdet,codes)
OM<-Fit[[ccno]]@OM
output<-plot(Fit[[ccno]],open_file = FALSE)
output
runApp('C:/GitHub/MERA/inst/shiny_apps/MERA')
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
outlist$ML
OM@Linf
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
cores<-4
out<-SRA_scope(OM=OM,
Chist = outlist$Chist,
Ehist = outlist$Ehist,
condition = outlist$condition,
Index= outlist$Index,
CAA = outlist$CAA,
CAL = outlist$CAL,
ML = outlist$ML,
length_bin = outlist$length_bin,
report=F,
mean_fit = TRUE,
cores=cores)
plot(out)
shiny::runApp('inst/shiny_apps/MERA')
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
cores<-4
out<-SRA_scope(OM=OM,
Chist = outlist$Chist,
Ehist = outlist$Ehist,
condition = outlist$condition,
Index= outlist$Index,
CAA = outlist$CAA,
CAL = outlist$CAL,
ML = outlist$ML,
length_bin = outlist$length_bin,
report=F,
mean_fit = TRUE,
cores=cores)
packageVersion('MSEtool')
runApp('inst/shiny_apps/MERA')
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
cores<-4
out<-SRA_scope(OM=OM,
Chist = outlist$Chist,
Ehist = outlist$Ehist,
condition = outlist$condition,
Index= outlist$Index,
CAA = outlist$CAA,
CAL = outlist$CAL,
ML = outlist$ML,
length_bin = outlist$length_bin,
report=F,
mean_fit = TRUE,
cores=cores)
library("MSEtool")
packageVersion('MSEtool')
outlist<-readRDS("C:/temp/outlist")
OM<-readRDS("C:/temp/OM")
cores<-4
out<-SRA_scope(OM=OM,
Chist = outlist$Chist,
Ehist = outlist$Ehist,
condition = outlist$condition,
Index= outlist$Index,
CAA = outlist$CAA,
CAL = outlist$CAL,
ML = outlist$ML,
length_bin = outlist$length_bin,
report=F,
mean_fit = TRUE,
cores=cores)
outlist
source('C:/Users/tcar_/Dropbox/MERA prototyping/OM_Scoping/OM scoping 2.R', echo=TRUE)
shiny::runApp('inst/shiny_apps/MERA')
?selectInput
runApp('inst/shiny_apps/MERA')
install.packages("cowplot")
runApp('inst/shiny_apps/MERA')
