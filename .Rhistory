library(DLMtool)
library(MSEtool)
setwd("C:/Users/tcarruth/Documents/GitHub/DLMDev/Case_Studies/Toothfish_HeardIsland_CCAMLR")
nsim<-96
OM<-CASAL2OM(CASALdir='data/CASAL',Name="Patagonian toothfish Heard Island and McDonald Islands", Agency ="CCAMLR", Region="Southern Ocean",
Sponsor="Marine Stewardship Council",Latitude = -53, Longitude = -73.5, nsim=nsim, proyears=50, interval = 2, pstar=0.5,
maxF=2,reps=1, seed=1, Common_Name = "Patagonian toothfish", Species = "Dissostichus eleginoides",
Source ="CCAMLR",Author="Ziegler and Welsford 2015")
trl<-function(nsim,mu,sd)mu*exp(rnorm(nsim,-(sd^2)/2,sd))
OM@cpars$D<-trl(nsim,OM@D[1],0.1)     # CV is around this among indices
OM@cpars$M<-trl(nsim,OM@M[1],0.1)
OMdoc(OM, openFile=FALSE)
saveRDS(OM, file="OM.Rdata")
plot(0:10,yaxs='n')
plot(0:10,yax='n')
plot(0:10,yaxs='i')
warnings()
plot(0:10,yaxs='i')
?SS2OM
library(DLMtool)
library(MSEtool)
setwd("C:/Users/tcarruth/Documents/GitHub/DLMDev/Case_Studies/Blue_grenadier_SEA_AFMA")
nsim<-96
OM<-SS2OM(SSdir='data/SS', nsim=nsim, proyears=50, Obs=DLMtool::Precise_Unbiased,
Name="Blue grenadier South East Australia",
Source="Castillo-Jordán, C. and Tuck, G.N. (2018). Blue grenadier (Macruronus novaezelandiae) stock assessment based on data up to 2017 – development of a preliminary base case. Technical paper presented to the SERAG, 19-21 September 2018, Hobart, Australia.",
Author="Castillo-Jordán, C. and Tuck, G.N.")
proyears = 50
reps = 1
maxF = 3
seed = 1
Obs = DLMtool::Generic_Obs
Imp = DLMtool::Perfect_Imp
Name = "OM generated by SS2OM function"
Source = "No source provided"
Author = "No author provided"
SSdir='data/SS'
getwd()
if(packageVersion("r4ss") != 1.24 && packageVersion("r4ss") != 1.34) {
warning(paste0("r4ss version ", packageVersion("r4ss"), " was detected. This function is only tested on version 1.24 and 1.34."), call. = FALSE)
}
dots <- list(dir = SSdir, ...)
if(!any(names(dots) == "covar")) dots$covar <- FALSE
if(!any(names(dots) == "forecast")) dots$forecast <- FALSE
if(!any(names(dots) == "ncols")) dots$ncols <- 1e3
if(!any(names(dots) == "printstats")) dots$printstats <- FALSE
if(!any(names(dots) == "verbose")) dots$verbose <- FALSE
if(!any(names(dots) == "warn")) dots$warn <- FALSE
SSdir='data/SS'
dots <- list(dir = SSdir, ...)
dots <- list(dir = SSdir
)
dots
if(!any(names(dots) == "covar")) dots$covar <- FALSE
if(!any(names(dots) == "forecast")) dots$forecast <- FALSE
if(!any(names(dots) == "ncols")) dots$ncols <- 1e3
if(!any(names(dots) == "printstats")) dots$printstats <- FALSE
if(!any(names(dots) == "verbose")) dots$verbose <- FALSE
if(!any(names(dots) == "warn")) dots$warn <- FALSE
dots
dots
dots <- list(dir = SSdir, ...)
dots <- list(dir = SSdir
)
dots
dots <- list(dir = SSdir, ...)
if(!any(names(dots) == "covar")) dots$covar <- FALSE
if(!any(names(dots) == "forecast")) dots$forecast <- FALSE
if(!any(names(dots) == "ncols")) dots$ncols <- 1e3
if(!any(names(dots) == "printstats")) dots$printstats <- FALSE
if(!any(names(dots) == "verbose")) dots$verbose <- FALSE
if(!any(names(dots) == "warn")) dots$warn <- FALSE
message(paste("-- Using function SS_output of package r4ss version", packageVersion("r4ss"), "to extract data from SS file structure --"))
message(paste("Reading directory:", SSdir))
replist <- do.call(r4ss::SS_output, dots)
message("-- End of r4ss operations --\n")
packageVersion("r4ss")
packageVersion("r4ss")
install.packages('r4ss')
install.packages("r4ss")
install_github("r4ss/r4ss")
devtools::install_github("r4ss/r4ss")
shiny::runApp('~/GitHub/MERA/inst/shiny_apps/MERA')
options<-list(res=5)
Intro_title[[1]] <- "Introduction"
Intro_text[[1]] <- "Status quo fishing effort and catches are projected to evaluate biological risk. Zero catch and FMSY fishing are also projected to frame performance."
# --- Tables ---
Tab_title[[1]] <- "Table 1. Projected biomass relative 50% BMSY"
Tab_text[[1]] <-"The probability that projected biomass exceeds 50% BMSY. "
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
ind<-1+(0:1000*options$res)
ind<-ind[ind<=proyears]
LRP<-round(apply(MSEobj@B_BMSY>0.5,2:3,mean)*100,rnd)[,ind]
Tab1<-as.data.frame(cbind(c("Current effort", "Current catches", "FMSY fishing", "Zero fishing"),LRP),stringsAsFactors = F)
rnd=1
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
ind<-1+(0:1000*options$res)
ind<-ind[ind<=proyears]
LRP<-round(apply(MSEobj@B_BMSY>0.5,2:3,mean)*100,rnd)[,ind]
LRP
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
ind<-1+(0:1000*options$res)
ind<-ind[ind<=proyears]
TRP<-round(apply(MSEobj@B_BMSY,2:3,mean)*100,rnd)[,ind]
TRP
TRP<-round(apply(MSEobj@B_BMSY>1,2:3,mean)*100,rnd)[,ind]
TRP
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA',appName="mera")
