Yd<-MSEobj@C/ array(rep(MSEobj@C[,,1],MSEobj@proyears),dim(MSEobj@C))#MSEobj@OM$RefY
Yd[is.na(Yd)]<-0
Ylims<- c(0,min(10,quantile(Yd,0.95)))
for(i in 1:nMPs){
plot(range(yrs),Ylims,col="white")
plotquant(Yd[,i,],p=quants,yrs,qcol,lcol,ablines=1)
mtext(MSEobj@MPs[i],3,line=0.2,font=2,col=MPcols[i])
}
mtext("Yield relative to today",2,line=0.7,outer=T)
mtext("Projection Year",1,line=0.7,outer=T)
}
F_FMSYproj<-function(MSEobj,MSEobj_reb,options=list(),maxcol=5,qcol=rgb(0.4,0.8,0.95), lcol= "dodgerblue4",quants=c(0.05,0.25,0.75,0.95)){
MPcols<-rep('purple',MSEobj@nMPs)
maxcol=5
MPs<-MSEobj@MPs
nMPs<-length(MPs)
yrs<-Current_Year+(1:MSEobj@proyears)
nc<-maxcol
nr<-ceiling(nMPs/nc)
par(mfrow=c(nr,nc),mai=c(0.3,0.3,0.2,0.01),omi=c(0.5,0.5,0.05,0.05))
F_FMSY<-MSEobj@F_FMSY
Flims <- c(0,quantile(F_FMSY,0.95))
for(i in 1:nMPs){
plot(range(yrs),Flims,col="white")
plotquant(F_FMSY[,i,],p=quants,yrs,qcol,lcol,ablines=c(0.5,1))
mtext(MSEobj@MPs[i],3,line=0.2,font=2,col=MPcols[i])
}
mtext("F/FMSY",2,line=0.7,outer=T)
mtext("Projection Year",1,line=0.7,outer=T)
}
PB100<<-function (MSEobj = NULL, Ref = 1, Yrs = -5)
{
Yrs <- ChkYrs(Yrs, MSEobj)
PMobj <- new("PMobj")
PMobj@Name <- "Probability long-term biomass is greater than BMSY"
if (Ref != 1) {
PMobj@Caption <- paste0("Prob. B > ", Ref, " BMSY (Year ",
Yrs[1],"-",Yrs[2],")")
}
else {
PMobj@Caption <- paste0("Prob. B > BMSY (Years ",
Yrs[1], ")")
}
PMobj@Ref <- Ref
PMobj@Stat <- MSEobj@B_BMSY[, , Yrs[2]]
PMobj@Prob <- calcProb(PMobj@Stat > PMobj@Ref, MSEobj)
PMobj@Mean <- calcMean(PMobj@Prob)
PMobj@MPs <- MSEobj@MPs
PMobj
}
class(PB100)<<-'PM'
PB50<<-function (MSEobj = NULL, Ref = 0.5, Yrs = -5)
{
Yrs <- ChkYrs(Yrs, MSEobj)
PMobj <- new("PMobj")
PMobj@Name <- "Probability long-term biomass is greater than 50% BMSY"
if (Ref != 1) {
PMobj@Caption <- paste0("Prob. B > ", Ref, " 50% BMSY (Year ",
Yrs[1],"-",Yrs[2],")")
}
else {
PMobj@Caption <- paste0("Prob. B > 50% BMSY (Years ",
Yrs[1], ")")
}
PMobj@Ref <- Ref
PMobj@Stat <- MSEobj@B_BMSY[, , Yrs[2]]
PMobj@Prob <- calcProb(PMobj@Stat > PMobj@Ref, MSEobj)
PMobj@Mean <- calcMean(PMobj@Prob)
PMobj@MPs <- MSEobj@MPs
PMobj
}
class(PB50)<<-'PM'
LTY2<<-function (MSEobj = NULL, Ref = 0.5, Yrs = -5)
{
Yrs <- ChkYrs(Yrs, MSEobj)
PMobj <- new("PMobj")
PMobj@Name <- paste0("Average Yield relative to Reference Yield (Years ",
Yrs[1], "-", Yrs[2], ")")
if (Ref != 1) {
PMobj@Caption <- paste0("Prob. Yield > ", Ref,
" Ref. Yield (Years ", Yrs[1], "-", Yrs[2],
")")
}
else {
PMobj@Caption <- paste0("Prob. Yield > Ref. Yield (Years ",
Yrs[1], "-", Yrs[2], ")")
}
RefYd <- array(MSEobj@OM$RefY, dim = dim(MSEobj@C[, , Yrs[1]:Yrs[2]]))
PMobj@Stat <- MSEobj@C[, , Yrs[1]:Yrs[2]]/RefYd
PMobj@Ref <- 0.5
PMobj@Prob <- calcProb(PMobj@Stat > PMobj@Ref, MSEobj)
PMobj@Mean <- calcMean(PMobj@Prob)
PMobj@MPs <- MSEobj@MPs
PMobj
}
class(LTY2)<<-'PM'
Tplot<-function(MSEobj, MSEobj_reb, controls=list()){
TradePlot(MSEobj,'PB50', 'LTY2', 'PB100','LTY2',fill=rgb(0.4,0.8,0.95))
}
# ============= Risk Assessment ==================
Tabs <- Figs <- Tab_title <- Tab_text <- Fig_title <- Fig_text <- Fig_dim <- options <- new('list')
# These are the names of widgets and their values to display in this skin / mode
#             years in projection,  year resolution of reporting  rounding of digits
#options<-list(res=5)
# --- Tables ---
Tab_title[[1]] <- "Table 1. Projected biomass relative 50% BMSY"
Tab_text[[1]] <-"The probability that projected biomass exceeds 50% BMSY. "
Tabs[[1]]<-function(MSEobj,MSEobj_reb,options=list(res=5),rnd=1){
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
ind<-1+(0:1000*options$res)
ind<-ind[ind<=proyears]
LRP<-round(apply(MSEobj@B_BMSY>0.5,2:3,mean)*100,rnd)[,ind]
Tab1<-as.data.frame(cbind(c("Current effort", "Current catches", "FMSY fishing", "Zero fishing"),LRP))
colnams<-c("MP",ind+Current_Year)
names(Tab1)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Starting between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab1,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab1), valueColumns = 2:ncol(Tab1), color = styleInterval(c(50,100),c('red','orange','green')))
}
Tab_title[[2]] <- "Table 2. Projected biomass relative to BMSY"
Tab_text[[2]] <-"The probability that projected biomass is above BMSY. "
Tabs[[2]]<-function(MSEobj,MSEobj_reb,options=list(res=5),rnd=1){
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
ind<-1+(0:1000*options$res)
ind<-ind[ind<=proyears]
LRP<-round(apply(MSEobj@B_BMSY>0.5,2:3,mean)*100,rnd)[,ind]
Tab1<-as.data.frame(cbind(c("Current effort", "Current catches", "FMSY fishing", "Zero fishing"),LRP))
colnams<-c("MP",ind+Current_Year)
names(Tab1)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Starting between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab1,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab1), valueColumns = 2:ncol(Tab1), color = styleInterval(c(50,100),c('red','orange','green')))
}
#Tab_title[[3]] <- Tab_title[[4]] <- Tab_title[[5]] <- Tab_title[[6]] <- Tab_title[[7]] <- Tab_title[[8]] <- Tab_title[[9]] <- "" # make extras empty
Fig_title[[2]] <- "Figure 1. Risk Assessment. B/BMSY and Yield (relative to today) projection plots"
Fig_text[[2]] <-  "Figure 1. Risk assessment text. Projections of biomass and yield relative to MSY levels. The blue regions represent the 90% and 50% probability intervals, the white solid line is the median and the dark blue lines are two example simulations. Grey horizontal lines denote the target and limit reference points."
Figs[[2]]<-function(MSEobj,MSEobj_reb,options=list())function(MSEobj,MSEobj_reb,options=list()) BMSYproj(MSEobj,MSEobj_reb,options,maxcol=4)
Fig_dim[[2]]<-function(dims)list(height=300,width=300)
Fig_title[[1]] <- ""#<- Fig_title[[3]] <- Fig_title[[4]] <- Fig_title[[5]]<- Fig_title[[7]] <- Fig_title[[8]] <- Fig_title[[9]] <- "" # make extras empty
Risk_Assessment<-list(Tabs=Tabs, Figs=Figs, Tab_title=Tab_title, Tab_text=Tab_text, Fig_title=Fig_title, Fig_text=Fig_text, Fig_dim=Fig_dim, options=options)
# ============= Planning =========================
Tabs <- Figs <- Tab_title <- Tab_text <- Fig_title <- Fig_text <- Fig_dim <- options <- new('list')
# These are the names of widgets and their values to display in this skin / mode
#             years in projection,  year resolution of reporting  rounding of digits
options<-list(burnin=10,            res=1)
# --- Tables ---
Tab_title[[1]] <- "Table 1. Projected biomass relative to the LRP"
Tab_text[[1]] <-"The probability that projected biomass is above 50% BMSY. Probabilities of 50% or lower are shaded red. Probabilities over 90% are shaded green. "
Tabs[[1]]<-function(MSEobj,MSEobj_reb,options=list(res=1),rnd=1){
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
burnin<-10
ind<-1+(0:1000*options$res)
ind<-ind[ind<=min(burnin,proyears)]
LRP<-round(apply(MSEobj@B_BMSY[,,1:burnin,drop=FALSE]>0.5,2:3,mean)*100,rnd)[,ind]
Tab1<-as.data.frame(cbind(MSEobj@MPs,LRP))
colnams<-c("MP",ind+Current_Year)
names(Tab1)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Starting between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab1,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab1), valueColumns = 2:ncol(Tab1), color = styleInterval(c(50,90),c('red','orange','green')))
}
Tab_title[[2]] <- "Table 2. Projected biomass relative to the TRP"
Tab_text[[2]] <-"The probability that projected biomass is above BMSY"
Tabs[[2]]<-function(MSEobj,MSEobj_reb,options=list(res=1),rnd=1){
nMPs<-MSEobj@nMPs
proyears<-MSEobj@proyears
burnin<-10
ind<-1+(0:1000*options$res)
ind<-ind[ind<=min(burnin,proyears)]
TRP<-round(apply(MSEobj@B_BMSY[,,1:burnin,drop=FALSE]>1,2:3,mean)*100,rnd)[,ind]
Tab2<-as.data.frame(cbind(MSEobj@MPs,TRP))
colnams<-c("MP",ind+Current_Year)
names(Tab2)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Simulations start between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab2,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab2), valueColumns = 2:ncol(Tab2), color = styleInterval(c(25,50,100),c('red','orange','green','darkgreen')))
}
Tab_title[[3]] <- Tab_title[[4]] <- Tab_title[[5]] <- Tab_title[[6]] <- Tab_title[[7]] <- Tab_title[[8]] <- Tab_title[[9]] <- "" # make extras empty
# --- Figures ---
Fig_title[[1]]<-""
Fig_title[[2]] <- "Figure 1. Biomass projection relative to the Target and Limit Reference Points"
Fig_text[[2]] <- "Projections of biomass and yield relative to MSY levels. The blue regions represent the 90% and 50% probability intervals,
the white solid line is the median and the dark blue lines are two example simulations.
Grey horizontal lines denote the Target (BMSY) and Limit (50% BMSY) Reference Points."
Figs[[2]]<-function(MSEobj,MSEobj_reb,options=list()) BMSYproj(MSEobj,MSEobj_reb,options)
Fig_dim[[2]]<-function(dims)list(height=ceiling(dims$nMPs/5)*250,width=1100)
Fig_title[[3]] <- "Figure 2. Long-term HCR"
Fig_text[[3]] <- "Projections of biomass relative to MSY and unfished (B0) levels given a starting depletion of half BMSY. The rebuilding analysis simulates the fishery currently in a depleted state even if the user-specified depletion in the operating model is higher.
In these cases, the rebuilding analysis provides added assurance whether a particular management procedure would be likely to rebuild the stock if the user-specified depletion level is overly optimistic and in need of rebuilding.
The blue regions represent the 90% and 50% probability intervals, the white solid line is the median and the dark blue lines are two example simulations. Grey horizontal lines denote the limit and target reference points"
Figs[[3]]<-function(MSEobj,MSEobj_reb,options=list()) LT_HCR(MSEobj,MSEobj_reb,options)
Fig_dim[[3]]<-function(dims)list(height=ceiling(dims$nMPs/5)*250,width=1100)
Fig_title[[4]] <- "Figure 3. Short-term HCR"
Fig_text[[4]] <- "As Figure 2 but over the first 10 years."
Figs[[4]] <- function(MSEobj,MSEobj_reb,options=list()) ST_HCR(MSEobj,MSEobj_reb,options)
Fig_dim[[4]]<-function(dims)list(height=ceiling(dims$nMPs/5)*250,width=1100)
Fig_title[[5]] <- "Figure 4. Evaluation of current uncertainties"
Fig_text[[5]] <- "This figure identifies those questions across which there is the highest variability in long term yield (average yield over last 10 years of the projection). This figures identifies which elements of the questionnaire (Step A) are the most consequential uncertainties."
Figs[[5]] <- function(MSEobj,MSEobj_reb,options=list()) CCU_plot(MSEobj,MSEobj_reb,options)
Fig_dim[[5]]<-function(dims)list(height=ceiling(dims$nMPs/3)*350,width=1300)
Fig_title[[6]] <- "Figure 5. Value of information"
Fig_text[[6]] <- "This figure identifies the key observation uncertainties (biases and errors) in determing the long-term yield performance of MPs (average yield over last 10 years of the projection)."
Figs[[6]] <- function(MSEobj,MSEobj_reb,options=list()) VOI_plot(MSEobj,MSEobj_reb,options)
Fig_dim[[6]]<-function(dims)list(height=ceiling(dims$nMPs/6)*350,width=1300)
Fig_title[[7]] <- "Figure 6. Yield projection"
Fig_text[[7]] <- "Future yield as a fraction of current yield"
Figs[[7]] <- function(MSEobj,MSEobj_reb,options=list()) Yproj(MSEobj,MSEobj_reb,options)
Fig_dim[[7]]<-function(dims)list(height=ceiling(dims$nMPs/5)*350,width=1300)
Fig_title[[8]] <- "Figure 7. Fishing mortality rate projection"
Fig_text[[8]] <- "Future fishing mortality rate relative to FMSY"
Figs[[8]] <- function(MSEobj,MSEobj_reb,options=list()) F_FMSYproj(MSEobj,MSEobj_reb,options)
Fig_dim[[8]]<-function(dims)list(height=ceiling(dims$nMPs/5)*350,width=1300)
Fig_title[[9]] <- "Figure 8. Yield - Biomass trade-offs"
Fig_text[[9]] <- "Trade-off between yield and biomass risks"
Figs[[9]] <- function(MSEobj,MSEobj_reb,options=list()) Tplot(MSEobj,MSEobj_reb,options)
Fig_dim[[9]]<-function(dims)list(height=550,width=1100)
Planning<-list(Tabs=Tabs, Figs=Figs, Tab_title=Tab_title, Tab_text=Tab_text, Fig_title=Fig_title, Fig_text=Fig_text, Fig_dim=Fig_dim, options=options)
# ============= Evaluation =======================
Tabs <- Figs <- Tab_title <- Tab_text <- Fig_title <- Fig_text <- Fig_dim <- options <- new('list')
# These are the names of widgets and their values to display in this skin / mode
#             years in projection,  year resolution of reporting  rounding of digits
options<-list(burnin=10,            res=1,  YrsIU = 5)
# --- Tables ---
Tab_title[[1]] <- "Table 1. Biomass relative to 50% BMSY"
Tab_text[[1]] <-"The biomass projection for the interim years that an MP has been in use."
Tabs[[1]]<-function(MSEobj,MSEobj_reb,options=list(burnin=10,res=1),res=5,rnd=1){
nMPs<-MSEobj_reb@nMPs
proyears<-MSEobj_reb@proyears
ind<-1:min(options$burnin,proyears)
LRP<-matrix(round(apply(MSEobj@B_BMSY[,,1:options$burnin,drop=FALSE]>0.5,2:3,mean)*100,rnd)[,ind],nrow=nMPs)
Tab1<-as.data.frame(cbind(MSEobj@MPs,LRP))
colnams<-c("MP",Current_Year-((options$burnin-1):0))
names(Tab1)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Starting between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab1,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab1), valueColumns = 2:ncol(Tab1), color = styleInterval(c(50,100),c('red','orange','green')))
}
Tab_title[[2]] <- "Table 2. Biomass relative to BMSY"
Tab_text[[2]] <-"The biomass projection for the interim years that an MP has been in use."
Tabs[[2]]<-function(MSEobj,MSEobj_reb, options=list(burnin=10,res=1),rnd=1){
nMPs<-MSEobj_reb@nMPs
proyears<-MSEobj_reb@proyears
ind<-1:min(options$burnin,proyears)
TRP<-matrix(round(apply(MSEobj@B_BMSY[,,ind,drop=FALSE]>1,2:3,mean)*100,rnd)[,ind],nrow=nMPs)
Tab2<-as.data.frame(cbind(MSEobj@MPs,TRP))
colnams<-c("MP",Current_Year-((options$burnin-1):0))
names(Tab2)<-colnams
Bdeps<-MSEobj@OM$D/MSEobj@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Simulations start between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab2,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab2), valueColumns = 2:ncol(Tab2), color = styleInterval(c(25,50,100),c('red','orange','green','darkgreen')))
}
Tab_title[[3]] <- "Table 3. Long term HCR"
Tab_text[[3]] <-"Probability of biomass exceeding the target reference point in the years since MP adoption."
Tabs[[3]]<-function(MSEobj,MSEobj_reb,options=list(burnin=10,res=1),rnd=1){
nMPs<-MSEobj_reb@nMPs
proyears<-MSEobj_reb@proyears
ind<-proyears-(9:0)
TRP<-matrix(round(apply(MSEobj_reb@B_BMSY[,,ind,drop=F]>1,2:3,mean)*100,rnd),nrow=nMPs)
Tab3<-as.data.frame(cbind(MSEobj_reb@MPs,TRP))
colnams<-c("MP",Current_Year+proyears-options$burnin-(9:0))
names(Tab3)<-colnams
Bdeps<-MSEobj_reb@OM$D/MSEobj_reb@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Simulations start between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab3,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab3), valueColumns = 2:ncol(Tab3), color = styleInterval(c(25,50,100),c('red','orange','green','darkgreen')))
}
Tab_title[[4]] <- "Table 4. Short term HCR"
Tab_text[[4]] <-"Probability of biomass exceeding the target reference point in the years since MP adoption"
Tabs[[4]]<-function(MSEobj, MSEobj_reb,options=list(),rnd=1){
nMPs<-MSEobj_reb@nMPs
proyears<-MSEobj_reb@proyears
MGT2<-2* MSEobj_reb@OM$MGT
ind<-1:20
TRP<-matrix(round(apply(MSEobj_reb@B_BMSY[,,ind,drop=FALSE]>1,2:3,mean)*100,rnd)[,ind],nrow=nMPs)
shaderng=range(ceiling(MGT2))
#shaderng[2]<-min(20,shaderng[2])
Tab4<-as.data.frame(cbind(MSEobj_reb@MPs,TRP))
colnams<-c("MP",Current_Year+(1:20)-options$burnin)
names(Tab4)<-colnams
Bdeps<-MSEobj_reb@OM$D/MSEobj_reb@OM$SSBMSY_SSB0 #MSEobj_reb@B_BMSY[,1,1]#
caption=paste0("Simulations start between ",round(min(Bdeps)*100,0), "% and ", round(max(Bdeps)*100,0), "% BMSY" )
datatable(Tab4,caption=caption)%>%
formatStyle(columns = 2:ncol(Tab4), valueColumns = 2:ncol(Tab4), color = styleInterval(c(25,50,100),c('red','orange','green','darkgreen')))%>%
formatStyle(colnams[1+shaderng[1]:shaderng[2]],backgroundColor='lightgrey')
}
Tab_title[[5]] <- Tab_title[[6]] <- Tab_title[[7]] <- Tab_title[[8]] <- Tab_title[[9]] <- "" # make extras empty
# --- Figures ---
Fig_title[[1]]<-""
Fig_title[[2]] <- "Figure 1. Biomass projected since MP adoption"
Fig_text[[2]] <- "Projections of biomass relative to MSY levels. The blue regions represent the 90% and 50% probability intervals, the white solid line is the median and the dark blue lines are two example simulations. Grey horizontal lines denote the target and limit reference points. The bold black vertical line is the current year."
Figs[[2]]<-function(MSEobj,MSEobj_reb,options=list()) BMSYproj(MSEobj,MSEobj_reb,options,maxcol=1)
Fig_dim[[2]] <- function(dims)list(height=420,width=600)
Fig_title[[3]] <- "Figure 2. Long-term HCR"
Fig_text[[3]] <- "Projections of biomass relative to MSY and unfished (B0) levels given a starting depletion of half BMSY. The rebuilding analysis simulates the fishery currently in a depleted state even if the user-specified depletion in the operating model is higher.
In these cases, the rebuilding analysis provides added assurance whether a particular management procedure would be likely to rebuild the stock if the user-specified depletion level is overly optimistic and in need of rebuilding.
The blue regions represent the 90% and 50% probability intervals, the white solid line is the median and the dark blue lines are two example simulations. Grey horizontal lines denote the limit and target reference points. The bold black vertical line is the current year, the black vertical line denotes the last 10 years of the projection over which results are tabulated."
Figs[[3]]<-function(MSEobj,MSEobj_reb,options=list()) LT_HCR(MSEobj,MSEobj_reb,options,maxcol=1,vline=41)
Fig_dim[[3]] <- function(dims)list(height=420,width=600)
Fig_title[[4]] <- "Figure 3. Short-term HCR"
Fig_text[[4]] <- "As Figure 2 but over a 20 year projection. The shaded grey region is the period between the minimum and maximum values of two mean generation times."
Figs[[4]]<-function(MSEobj,MSEobj_reb,options=list()) ST_HCR(MSEobj,MSEobj_reb,options,plotMGT=T,maxcol=1)
Fig_dim[[4]] <- function(dims)list(height=420,width=600)
Fig_title[[5]] <- "Figure 4. Evaluation of current uncertainties"
Fig_text[[5]] <- "This figure identifies those questions across which there is the highest variability in long term yield (average yield over last 10 years of the projection). This figures identifies which elements of the questionnaire (Step A) are the most consequential uncertainties."
Figs[[5]] <- function(MSEobj,MSEobj_reb,options=list()) CCU_plot(MSEobj,MSEobj_reb,options,maxcol=1)
Fig_dim[[5]]<-function(dims)list(height=420,width=600)
Fig_title[[6]] <- "Figure 5. Value of information"
Fig_text[[6]] <- "This figure identifies the key observation uncertainties (biases and errors) in determing the long-term yield performance of MPs (average yield over last 10 years of the projection)."
Figs[[6]] <- function(MSEobj,MSEobj_reb,options=list()) VOI_plot(MSEobj,MSEobj_reb,options,maxcol=1)
Fig_dim[[6]]<-function(dims)list(height=420,width=600)
Fig_title[[7]] <- Fig_title[[8]] <- Fig_title[[9]] <- "" # make extras empty
Evaluation<-list(Tabs=Tabs, Figs=Figs, Tab_title=Tab_title, Tab_text=Tab_text, Fig_title=Fig_title, Fig_text=Fig_text, Fig_dim=Fig_dim, options=options)
# ========== Build =============================
MSC<-list(Risk_Assessment=Risk_Assessment,Planning=Planning,Evaluation=Evaluation)
Skins[[1]]<-MSC
# ===== FAO ========================================================================================
# ============= Risk Evaluation ================
# ============= Planning =======================
# ============= Assessment =====================
# ===== Pew ========================================================================================
# ============= Risk Evaluation ================
# ============= Planning =======================
# ============= Assessment =====================
# ====== Wrap up ====================================================================================
Skin<-Skins[[1]]
Skin$Evaluation$Tabs[[res2]](MSEobj,MSEobj_reb,options)
res2<-1
Skin$Evaluation$Tabs[[res2]](MSEobj,MSEobj_reb,options)
Skin$Evaluation$Tabs[[res2]](MSEobj,MSEobj_reb,options)
runApp('inst/shiny_apps/MERA')
?datatable
runApp('inst/shiny_apps/MERA')
MSC$Risk_Assessment$Figs
MSC$Evaluation$Figs
runApp('inst/shiny_apps/MERA')
shiny::runApp('inst/shiny_apps/MERA')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
install.packages("DLMtool")
install.packages("MSEtool")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
## Show log messages
rsconnect::showLogs()
install.packages("DLMtool")
install.packages("MSEtool")
install.packages("MSEtool")
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
#install.packages("DLMtool")
#install.packages("MSEtool")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
#install.packages("DLMtool")
#install.packages("MSEtool")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
packageVersion('DLMtool')
?deployApp
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
#install.packages("DLMtool")
#install.packages("MSEtool")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
#install.packages("DLMtool")
#install.packages("MSEtool")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
## Show log messages
rsconnect::showLogs()
y
devtools::install_github("DLMtool")
devtools::install_github("MSEtool")
devtools::install_github("DLMtool/DLMtool")
devtools::install_github("DLMtool/DLMtool")
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
## Show log messages
rsconnect::showLogs()
install.packages(backports)
install.packages('backports')
install.packages('processx')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
packageVersion('devtools')
devtools::install_github("DLMtool/DLMtool")
devtools::install_github("DLMtool/MSEtool")
devtools::install_github("tcarruth/MSEtool")
?devtools::install_github
devtools::install_github("DLMtool/DLMtool",ref="develop")
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
installpackages('curl')
install.Packages('curl')
installPackages('curl')
install.packages('curl')
install.packages("curl")
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
devtools::install_github("DLMtool/DLMtool",ref="develop")
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
install.packages('df')
install.packages('fs')
install.packages("fs")
devtools::install_github("DLMtool/DLMtool",ref="develop")
install.packages('fs')
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
devtools::install_github("DLMtool/DLMtool",ref="develop")
devtools::install_github("DLMtool/DLMtool",ref="develop")
install.packages('glue')
devtools::install_github("DLMtool/DLMtool",ref="develop")
install.packages('ps')
devtools::install_github("DLMtool/DLMtool",ref="develop")
install.packages('rcpp')
install.packages('Rcpp')
devtools::install_github("DLMtool/DLMtool",ref="develop")
install.packages('rlang')
shiny::runApp('inst/shiny_apps/MERA')
runApp('inst/shiny_apps/MERA')
install.packages("rsconnect")
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
# options(repos = c("MyRepo"="http://packages.example.com", "CRAN"="https://cran.rstudio.org"))
devtools::install_github("DLMtool/DLMtool")#,ref="develop")
## Deploy app - assuming current wd is FRAME
## Restarts server and updates all files
setwd("C:/Users/tcarruth/Documents/GitHub/MERA")
setwd("C:/GitHub/MERA")
deployApp('inst/shiny_apps/MERA')
## Show log messages
rsconnect::showLogs()
library(rsconnect)
## Run this once to link to account
rsconnect::setAccountInfo(name='msc-dlmtool', token='F3598BCF837DEB55DB6AC8F712D9EC67', secret='bNM+5C9PqDle8Ovjkun9/9UX5PyKH4qL/DKiikBk')
## Note: make sure you have CRAN version of DLMtool and MSEtool
##       installed on local machine before deploying (dunno why!)
# options(repos = c("MyRepo"="http://packages.example.com", "CRAN"="https://cran.rstudio.org"))
devtools::install_github("DLMtool/DLMtool")#,ref="develop")
getDependencies
install.packages('utilities')
library(utilities)
library('utilities')
pack <- available.packages()
pack["DLMtool","Depends"]
?available.packages
